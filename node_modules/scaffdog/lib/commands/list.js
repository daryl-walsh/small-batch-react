"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const command_1 = require("@oclif/command");
const chalk_1 = tslib_1.__importDefault(require("chalk"));
const path = tslib_1.__importStar(require("path"));
const flags_1 = require("../flags");
const reader_1 = require("../template/reader");
const utils_1 = require("../utils");
class ListCommand extends command_1.Command {
    async run() {
        const { flags: { templateDir }, } = this.parse(ListCommand);
        const cwd = process.cwd();
        const reader = new reader_1.Reader(path.resolve(cwd, templateDir));
        const documents = reader.readAll();
        for (const document of documents) {
            const { name, description } = document.attributes;
            const desc = utils_1.truncate(description);
            this.log(`    - ${chalk_1.default.bold(name)} ${chalk_1.default.gray(`(${path.relative(cwd, document.path)})`)}`);
            if (desc !== '') {
                this.log(`        ${desc}`);
            }
        }
        this.log('');
    }
}
ListCommand.description = 'Print a list of available templates.';
ListCommand.flags = Object.assign({}, flags_1.commonFlags);
exports.default = ListCommand;
//# sourceMappingURL=list.js.map